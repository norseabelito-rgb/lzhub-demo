---
phase: 06-drive-integration
plan: 03
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - src/components/drive/drive-breadcrumb.tsx
  - src/components/drive/drive-search.tsx
  - src/components/drive/drive-folder-grid.tsx
autonomous: true

must_haves:
  truths:
    - "Breadcrumb shows current folder path with clickable segments"
    - "Search filters files by name within current context"
    - "Folder grid shows subfolders with distinct folder icons"
  artifacts:
    - path: "src/components/drive/drive-breadcrumb.tsx"
      provides: "Folder navigation breadcrumb"
      exports: ["DriveBreadcrumb"]
    - path: "src/components/drive/drive-search.tsx"
      provides: "Search input for filtering"
      exports: ["DriveSearch"]
    - path: "src/components/drive/drive-folder-grid.tsx"
      provides: "Grid of folder items for navigation"
      exports: ["DriveFolderGrid"]
  key_links:
    - from: "src/components/drive/drive-breadcrumb.tsx"
      to: "src/lib/drive/types.ts"
      via: "imports FolderPath type"
      pattern: "FolderPath"
    - from: "src/components/drive/drive-folder-grid.tsx"
      to: "src/lib/drive/types.ts"
      via: "imports DriveFolder type"
      pattern: "DriveFolder"
---

<objective>
Create the navigation components for folder browsing: breadcrumb for current location, search input for filtering, and folder grid for directory navigation.

Purpose: Enable users to navigate through Drive folder structure and find specific images by name.
Output: Three components in src/components/drive/ for navigation and search.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/06-drive-integration/06-CONTEXT.md
@.planning/phases/06-drive-integration/06-RESEARCH.md
@src/lib/drive/types.ts
@src/lib/drive/drive-store.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create DriveBreadcrumb for folder navigation</name>
  <files>src/components/drive/drive-breadcrumb.tsx</files>
  <action>
Install shadcn breadcrumb component first, then create the Drive breadcrumb:

```bash
npx shadcn@latest add breadcrumb
```

Create DriveBreadcrumb component:

1. Props interface:
   - folderPath: FolderPath[]
   - onNavigate: (index: number) => void (click to go to that path level)
   - onNavigateRoot: () => void (click "My Drive" to go to root)

2. Component structure using shadcn Breadcrumb:
   - First item always "My Drive" (represents root)
   - Map folderPath to BreadcrumbItem components
   - Last item is BreadcrumbPage (current, not clickable)
   - Other items are BreadcrumbLink (clickable)

3. Styling:
   - Use shadcn Breadcrumb, BreadcrumbList, BreadcrumbItem, BreadcrumbLink, BreadcrumbPage, BreadcrumbSeparator
   - Add Home or FolderRoot icon from lucide-react before "My Drive"

4. Click handlers:
   - "My Drive" click: onNavigateRoot()
   - Path item click: onNavigate(index)

5. Handle empty path case:
   - If folderPath is empty, just show "My Drive" as BreadcrumbPage (non-clickable since we're at root)

Example output: Home > My Drive > Event Photos > 2024
  </action>
  <verify>Breadcrumb renders with "My Drive" and clickable path segments</verify>
  <done>Breadcrumb shows current location with working navigation</done>
</task>

<task type="auto">
  <name>Task 2: Create DriveSearch input component</name>
  <files>src/components/drive/drive-search.tsx</files>
  <action>
Create search input for filtering files:

1. Props interface:
   - value: string
   - onChange: (query: string) => void
   - placeholder?: string (default: "Search files...")

2. Component structure:
   - Container div with relative positioning for icon
   - Search icon (lucide-react) positioned absolute left
   - Input element with padding-left for icon space
   - Optional clear button (X icon) when value is not empty

3. Styling:
   - Use consistent input styling from project (check existing inputs)
   - h-9 or h-10 for height
   - pl-9 for icon padding
   - rounded-md border background matches theme
   - Focus states consistent with design system

4. Behavior:
   - Controlled input (value/onChange)
   - No debouncing in component (caller handles if needed)
   - Clear button resets to empty string

5. Import icons:
   - Search from lucide-react
   - X from lucide-react (for clear button)
  </action>
  <verify>Search input renders with icon and clear button functionality</verify>
  <done>Search input with icon, clear button, and controlled value</done>
</task>

<task type="auto">
  <name>Task 3: Create DriveFolderGrid for folder navigation</name>
  <files>src/components/drive/drive-folder-grid.tsx</files>
  <action>
Create folder grid component for navigating into subfolders:

1. Props interface:
   - folders: DriveFolder[]
   - onNavigate: (folderId: string, folderName: string) => void

2. Component structure:
   - If folders.length === 0: return null (no folders to show)
   - Grid container: grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3
   - Each folder as a clickable card/button

3. Folder item styling:
   - Rounded rectangle card with border
   - Folder icon (Folder from lucide-react) with folder name
   - Hover state: bg-accent/50 or similar
   - cursor-pointer
   - flex items-center gap-2 for icon + name layout
   - Truncate long folder names with ellipsis

4. Click handler:
   - onClick={() => onNavigate(folder.id, folder.name)}

5. Folder icon styling:
   - Use Folder icon from lucide-react
   - Size: h-5 w-5
   - Color: text-muted-foreground or accent color

6. Layout consideration:
   - Folder grid should appear ABOVE the image grid when there are subfolders
   - Add mb-4 margin to separate from image grid below
  </action>
  <verify>Folder grid renders folder cards with icons and navigation works</verify>
  <done>Folder grid displays subfolders with click-to-navigate functionality</done>
</task>

</tasks>

<verification>
1. All three components exist in src/components/drive/
2. Breadcrumb shows path with working navigation
3. Search input has icon, placeholder, and clear button
4. Folder grid shows folders with icons
5. Clicking folder triggers navigation callback
6. No TypeScript errors
</verification>

<success_criteria>
- Breadcrumb displays "My Drive > Folder > Subfolder" format
- All breadcrumb segments except last are clickable
- Search input has search icon and clear functionality
- Folder cards show folder icon and name
- Clicking folder card triggers navigation
- Components are styled consistently with design system
</success_criteria>

<output>
After completion, create `.planning/phases/06-drive-integration/06-03-SUMMARY.md`
</output>
